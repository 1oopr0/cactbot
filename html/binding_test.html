<html>
<head>
<style>
.box {
    width: 1000px;
    height: 500px;
}
div {
    color: white;
    text-shadow: 2px 2px black;
}
</style>
<script>
    var lastLine = "(unknown log)";
    var zone = "(unknown zone)";

    function updateLoop() {
        if (!window.act) {
            var zoneDiv = document.getElementById("zone");
            zoneDiv.innerText = "NOT BOUND";
            return;
        }

        while (window.act.hasLogLines())
            lastLine = window.act.nextLogLine();

        var lineDiv = document.getElementById("logline");
        lineDiv.innerText = lastLine;

        zone = window.act.currentZone();

        var zoneDiv = document.getElementById("zone");
        zoneDiv.innerText = zone;

        var combatDiv = document.getElementById("incombat");
        combatDiv.innerText = window.act.inCombat();

        window.requestAnimationFrame(updateLoop);
    }

    window.requestAnimationFrame(updateLoop);

    function combatantMap() {
        var map = {};

        var count = window.act.numCombatants();
        for (var i = 0; i < count; ++i) {
            var combatant = window.act.getCombatant(i);
            // FIXME: "iD" camelcase is very odd.
            map[combatant.iD] = combatant;
        }

        return map;
    }
</script>
</head>
<body>
<div class="box">
    <div id="logline">asdf</div>
    <div id="zone">asdf</div>
    <div id="incombat">asdf</div>
</div>
</body>
</html>
